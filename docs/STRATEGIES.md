# 📚 交易策略库

本系统提供了 **11种** 经典量化交易策略，涵盖趋势跟踪、均值回归、波动突破、量价分析等多种类型。

---

## 📊 策略概览

| 策略名称 | 类型 | 风险等级 | 适用市场 |
|---------|------|---------|---------|
| [双均线交叉](#双均线交叉) | 趋势跟踪 | 中 | 趋势市场 |
| [MACD策略](#macd策略) | 趋势跟踪 | 中 | 趋势市场 |
| [RSI超买卖](#rsi超买卖) | 均值回归 | 中 | 震荡市场 |
| [布林带突破](#布林带突破) | 波动突破 | 中 | 波动市场 |
| [动量策略](#动量策略) | 趋势跟踪 | 高 | 强势市场 |
| [均值回归](#均值回归) | 均值回归 | 中 | 震荡市场 |
| [突破策略](#突破策略) | 趋势跟踪 | 高 | 突破行情 |
| [KDJ随机指标](#kdj随机指标) | 均值回归 | 中 | 震荡市场 |
| [成交量策略](#成交量策略) | 量价分析 | 中 | 放量行情 |
| [多因子组合](#多因子组合) | 综合策略 | 低 | 各种市场 |
| [网格交易](#网格交易) | 套利策略 | 低 | 震荡市场 |

---

## 🔥 详细策略说明

### 双均线交叉

**策略逻辑**: 短期均线上穿长期均线（金叉）买入，下穿（死叉）卖出

**参数**:
- `short_window`: 短期均线周期（默认: 5日）
- `long_window`: 长期均线周期（默认: 20日）

**适用场景**: 明显的上涨或下跌趋势市场

**优点**: 简单直观，趋势明确时效果好

**缺点**: 震荡市场会产生频繁假信号

---

### MACD策略

**策略逻辑**: MACD柱状图由负转正且DIF上穿DEA买入，反之卖出

**参数**:
- `fast`: 快速EMA周期（默认: 12）
- `slow`: 慢速EMA周期（默认: 26）
- `signal`: 信号线周期（默认: 9）

**适用场景**: 中长期趋势跟踪

**优点**: 过滤了部分价格噪音，信号相对稳定

**缺点**: 滞后性较强

---

### RSI超买卖

**策略逻辑**: RSI低于超卖线（30）买入，高于超买线（70）卖出

**参数**:
- `period`: RSI计算周期（默认: 14）
- `oversold`: 超卖阈值（默认: 30）
- `overbought`: 超买阈值（默认: 70）

**适用场景**: 震荡市场，价格区间波动

**优点**: 能捕捉价格极端点位

**缺点**: 趋势市场中可能过早离场

---

### 布林带突破

**策略逻辑**: 价格突破上轨买入，跌破下轨卖出；回归中轨平仓

**参数**:
- `period`: 布林带周期（默认: 20）
- `std_dev`: 标准差倍数（默认: 2）

**适用场景**: 波动率较大的市场

**优点**: 自动适应市场波动率

**缺点**: 趋势延续时容易提前离场

---

### 动量策略

**策略逻辑**: 价格和成交量同时放大时追涨，动量衰竭时离场

**参数**:
- `momentum_period`: 动量计算周期（默认: 10）
- `ma_period`: 均线周期（默认: 20）
- `threshold`: 动量阈值（默认: 3%）

**适用场景**: 强势上涨或下跌的动量市场

**优点**: 能抓住趋势加速段

**缺点**: 风险较高，适合激进型投资者

---

### 均值回归

**策略逻辑**: 价格偏离均值（Z-Score > 2）时反向交易，回归均值平仓

**参数**:
- `ma_period`: 均线周期（默认: 20）
- `entry_threshold`: 进入阈值（默认: 2倍标准差）
- `exit_threshold`: 退出阈值（默认: 0.5倍标准差）

**适用场景**: 震荡市场，价格围绕均值波动

**优点**: 数学基础扎实，风险控制好

**缺点**: 趋势市场中会逆势交易

---

### 突破策略

**策略逻辑**: 突破近期N日高点买入，跌破N日低点卖出

**参数**:
- `lookback_period`: 回望周期（默认: 20日）
- `breakout_threshold`: 突破阈值（默认: 2%）
- `volume_confirm`: 是否需要成交量确认（默认: True）

**适用场景**: 价格突破盘整区间的行情

**优点**: 能抓住行情启动点

**缺点**: 假突破会造成损失

---

### KDJ随机指标

**策略逻辑**: K线上穿D线且J值低位买入，K线下穿D线或J值过高卖出

**参数**:
- `k_period`: K值周期（默认: 9）
- `d_period`: D值周期（默认: 3）
- `j_period`: J值周期（默认: 3）

**适用场景**: 短期交易，震荡市场

**优点**: 灵敏度高，适合短线

**缺点**: 信号过于频繁

---

### 成交量策略

**策略逻辑**: 放量上涨买入，放量下跌卖出，结合OBV能量潮

**参数**:
- `volume_ma_period`: 成交量均线周期（默认: 20）
- `volume_surge_threshold`: 放量阈值（默认: 1.5倍）

**适用场景**: 量价配合明显的行情

**优点**: 量价分析基础扎实

**缺点**: 单独使用可能不够全面

---

### 多因子组合

**策略逻辑**: 综合MA、MACD、RSI、趋势强度4个因子，加权评分决定交易

**参数**:
- `weight_ma`: MA因子权重（默认: 25%）
- `weight_macd`: MACD因子权重（默认: 25%）
- `weight_rsi`: RSI因子权重（默认: 25%）
- `weight_trend`: 趋势因子权重（默认: 25%）
- `buy_threshold`: 买入阈值（默认: 0.6）
- `sell_threshold`: 卖出阈值（默认: 0.4）

**适用场景**: 各种市场环境，稳健型投资

**优点**: 多因子分散风险，综合判断

**缺点**: 信号相对较少

---

### 网格交易

**策略逻辑**: 在价格区间内设置多层网格，低价买入高价卖出

**参数**:
- `grid_levels`: 网格层数（默认: 5层）
- `grid_spacing`: 网格间距（默认: 2%）
- `base_price_period`: 基准价格周期（默认: 20日）

**适用场景**: 震荡市场，价格在区间内波动

**优点**: 自动化程度高，适合震荡市

**缺点**: 趋势市场中表现不佳

---

## 💡 策略选择建议

### 按市场类型选择

| 市场类型 | 推荐策略 |
|---------|---------|
| 上涨趋势 | 双均线交叉、MACD、动量策略 |
| 下跌趋势 | 双均线交叉、MACD、突破策略 |
| 震荡市场 | RSI、布林带、均值回归、网格交易 |
| 波动放大 | 布林带、突破策略、成交量策略 |
| 不确定 | 多因子组合（稳健型） |

### 按风险偏好选择

| 风险等级 | 推荐策略 |
|---------|---------|
| 保守型 | 多因子组合、网格交易 |
| 稳健型 | 双均线交叉、MACD、布林带、均值回归 |
| 激进型 | 动量策略、突破策略、KDJ |

### 多策略组合建议

**稳健组合**: 双均线交叉 + MACD + 多因子组合
**平衡组合**: MACD + RSI + 布林带
**激进组合**: 动量策略 + 突破策略 + KDJ
**震荡组合**: RSI + 均值回归 + 网格交易

---

## ⚙️ 参数调优

### 趋势市场参数调整
- 增加均线周期（如30/60日）
- 放宽RSI阈值（20/80）
- 增大布林带标准差（2.5倍）

### 震荡市场参数调整
- 缩短均线周期（如5/10日）
- 收紧RSI阈值（35/65）
- 减小布林带标准差（1.5倍）

### 高波动市场参数调整
- 增大突破阈值
- 增加网格间距
- 提高动量阈值

---

## ⚠️ 风险提示

1. **历史回测不代表未来收益**
2. **建议先用模拟盘测试**
3. **不同策略在不同市场环境表现差异大**
4. **建议使用多策略组合分散风险**
5. **严格设置止损，控制仓位**

---

## 🔧 自定义策略

如需添加自定义策略，继承 `BaseStrategy` 基类：

```python
from strategy.base_strategy import BaseStrategy

class MyStrategy(BaseStrategy):
    def generate_signals(self, df):
        # 实现信号生成逻辑
        pass
    
    def get_current_signal(self, df):
        # 实现当前信号判断
        pass
```

然后在 `strategy/engine.py` 中注册新策略。
